<div class="grid gap-6 md:grid-cols-3">
  <div class="rounded bg-white p-6 shadow">
    <p class="text-sm uppercase text-slate-500">Total Income</p>
    <p class="mt-2 text-3xl font-semibold text-emerald-600"><%= humanized_money_with_symbol(@total_income) %></p>
  </div>
  <div class="rounded bg-white p-6 shadow">
    <p class="text-sm uppercase text-slate-500">Total Expenses</p>
    <p class="mt-2 text-3xl font-semibold text-rose-500"><%= humanized_money_with_symbol(@total_expenses) %></p>
  </div>
  <div class="rounded bg-white p-6 shadow">
    <p class="text-sm uppercase text-slate-500">Net Balance</p>
    <p class="mt-2 text-3xl font-semibold <%= @net_total >= Money.new(0) ? "text-emerald-600" : "text-rose-500" %>"><%= humanized_money_with_symbol(@net_total) %></p>
  </div>
</div>

<div class="mt-10 grid gap-6 md:grid-cols-2">
  <div class="rounded bg-white p-6 shadow">
    <h2 class="text-lg font-semibold text-slate-900">Accounts</h2>
    <ul class="mt-4 space-y-3">
      <% @accounts.each do |account| %>
        <li class="flex items-center justify-between">
          <p class="font-medium text-slate-800"><%= account.name %></p>
          <p class="text-base font-semibold <%= account.balance >= Money.new(0) ? "text-emerald-600" : "text-rose-500" %>"><%= humanized_money_with_symbol(account.balance) %></p>
        </li>
      <% end %>
    </ul>
    <div class="mt-4 text-right">
      <%= link_to "Manage accounts", accounts_path, class: "text-sm text-emerald-600" %>
    </div>
  </div>

  <div class="rounded bg-white p-6 shadow">
    <h2 class="text-lg font-semibold text-slate-900">Import CSV</h2>
    <p class="mt-1 text-sm text-slate-500">Upload CSV files from your bank to import transactions in bulk.</p>

    <div class="mt-4">
      <p class="text-xs uppercase text-slate-500">Supported Formats</p>
      <ul class="mt-2 space-y-1 text-sm text-slate-700">
        <li>TD Chequing Account</li>
        <li>TD Visa Credit Card</li>
        <li>PC Financial Mastercard</li>
      </ul>
    </div>

    <div class="mt-6 flex flex-col gap-2 text-sm">
      <%= link_to "Import CSV", new_csv_import_path, class: "text-emerald-600" %>
    </div>
  </div>
</div>

<div class="mt-10 rounded bg-white p-6 shadow">
  <div class="flex items-center justify-between">
    <h2 class="text-lg font-semibold text-slate-900">Recent transactions</h2>
    <%= link_to "View all", transactions_path, class: "text-sm text-emerald-600" %>
  </div>
  <table class="mt-4 w-full text-left text-sm">
    <thead>
      <tr class="text-slate-500">
        <th class="py-2">Date</th>
        <th class="py-2">Account</th>
        <th class="py-2">Description</th>
        <th class="py-2 text-right">Amount</th>
      </tr>
    </thead>
    <tbody>
      <% @recent_transactions.each do |tx| %>
        <tr class="border-t border-slate-100">
          <td class="py-3"><%= l(tx.occurred_on, format: :long) %></td>
          <td class="py-3"><%= tx.account.name %></td>
          <td class="py-3"><%= tx.description.presence || "â€”" %></td>
          <td class="py-3 text-right font-semibold <%= tx.income? ? "text-emerald-600" : "text-rose-500" %>"><%= humanized_money_with_symbol(tx.amount_signed) %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
